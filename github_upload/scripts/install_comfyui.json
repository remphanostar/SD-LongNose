{
  "name": "ComfyUI",
  "description": "ComfyUI - Node-based Stable Diffusion GUI",
  "version": "1.0.0",
  "run": [
    {
      "method": "shell.run",
      "params": {
        "message": "Preparing ComfyUI installation..."
      }
    },
    {
      "method": "fs.download",
      "params": {
        "url": "https://github.com/comfyanonymous/ComfyUI",
        "dir": "api/comfyui"
      }
    },
    {
      "method": "shell.run",
      "params": {
        "path": "api/comfyui",
        "message": "Installing ComfyUI dependencies...",
        "commands": [
          "pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118",
          "pip install -r requirements.txt"
        ]
      }
    },
    {
      "method": "fs.download",
      "params": {
        "url": "https://huggingface.co/runwayml/stable-diffusion-v1-5/resolve/main/v1-5-pruned.safetensors",
        "dir": "api/comfyui/models/checkpoints",
        "fileName": "v1-5-pruned.safetensors"
      }
    },
    {
      "method": "process.daemonize",
      "params": {
        "path": "api/comfyui",
        "command": "python",
        "args": [
          "main.py",
          "--listen",
          "0.0.0.0",
          "--port",
          "8188"
        ],
        "name": "comfyui"
      }
    },
    {
      "method": "browser.open",
      "params": {
        "url": "http://localhost:8188"
      }
    }
  ]
}
